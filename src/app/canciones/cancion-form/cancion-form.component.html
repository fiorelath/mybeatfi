<h2>{{ idEnEdicion ? '📝 Editar Canción' : '🎶 Agregar Canción' }}</h2>

<form [formGroup]="cancionForm" (ngSubmit)="guardar()" novalidate>

  <label for="titulo">Título:</label>
  <input id="titulo" formControlName="titulo" />
  <div *ngIf="titulo.touched && titulo.invalid" class="error">
    <small *ngIf="titulo.errors?.['required']">El título es obligatorio.</small>
    <small *ngIf="titulo.errors?.['minlength']">Mínimo 2 caracteres.</small>
    <small *ngIf="titulo.errors?.['maxlength']">Máximo 50 caracteres.</small>
  </div>

  <label for="artista">Artista:</label>
  <input id="artista" formControlName="artista" />
  <div *ngIf="artista.touched && artista.invalid" class="error">
    <small *ngIf="artista.errors?.['required']">El artista es obligatorio.</small>
  </div>

  <label>Duración:</label>
  <div style="display: flex; gap: 8px;">
    <div>
      <input type="number" id="minutos" formControlName="minutos" placeholder="Minutos" min="0" />
    </div>
    <div>
      <input type="number" id="segundos" formControlName="segundos" placeholder="Segundos" min="0" max="59" />
    </div>
  </div>
  <div *ngIf="minutos.touched && minutos.invalid" class="error">
    <small *ngIf="minutos.errors?.['required']">Los minutos son obligatorios.</small>
  </div>
  <div *ngIf="segundos.touched && segundos.invalid" class="error">
    <small *ngIf="segundos.errors?.['required']">Los segundos son obligatorios.</small>
    <small *ngIf="segundos.errors?.['max']">No puede exceder 59 segundos.</small>
  </div>

  <label for="genero">Género:</label>
  <input id="genero" formControlName="genero" />
  <div *ngIf="genero.touched && genero.invalid" class="error">
    <small *ngIf="genero.errors?.['required']">El género es obligatorio.</small>
  </div>

  <label for="imagenUrl">Imagen URL:</label>
  <input id="imagenUrl" formControlName="imagenUrl" />
  <div *ngIf="imagenUrl.touched && imagenUrl.invalid" class="error">
    <small *ngIf="imagenUrl.errors?.['required']">La imagen es obligatoria.</small>
    <small *ngIf="imagenUrl.errors?.['pattern']">Debe ser una URL válida (.jpg, .png, etc.).</small>
  </div>

  <button type="submit" [disabled]="cancionForm.invalid">{{ idEnEdicion ? 'Actualizar' : 'Guardar' }} Canción</button>
  <button type="button" (click)="resetFormulario()">Limpiar</button>
</form>

<p *ngIf="mensaje">{{ mensaje }}</p>
